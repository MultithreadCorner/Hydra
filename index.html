<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hydra: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_Hydra2.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Hydra
   &#160;<span id="projectnumber">4.0.1</span>
   </div>
   <div id="projectbrief">A header-only templated C++ framework to perform data analysis on massively parallel platforms.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Hydra Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://doi.org/10.5281/zenodo.1206261"></a> <a href="http://hydra-documentation.readthedocs.io/en/latest/?badge=latest"></a> <a href="https://github.com/MultithreadCorner/Hydra/releases/latest"></a> </p><hr/>
<div class="image">
<img src="logo_Hydra.png" width="500"/>
</div>
<h1>Table of Contents </h1>
<ul>
<li><a href="#what-is-it">What is it?</a></li>
<li><a href="#main-features">Main features</a></li>
<li><a href="#hydra-and-thrust">Hydra and Thrust</a></li>
<li><a href="#supported-parallel-backends">Supported Parallel Backends</a></li>
<li><a href="#the-latest-version">The Latest Version</a></li>
<li><a href="#documentation">Documentation</a><ul>
<li><a href="#reference-manual">Reference manual</a></li>
<li><a href="#users-guide">Users guide</a></li>
</ul>
</li>
<li><a href="#installation-and-requirements">Installation and requirements</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#licensing">Licensing</a></li>
<li><a href="#contact-the-developers">Contact the developers</a></li>
<li><a href="#author">Author</a></li>
<li><a href="#acknowledgement">Acknowledgement</a> <hr/>
</li>
</ul>
<h2>What is it? </h2>
<p>Hydra is a C++14 compliant and header only framework designed to perform common data analysis tasks on massively parallel platforms. Hydra provides a collection of containers and algorithms commonly used in HEP data analysis, which can deploy transparently OpenMP, CUDA and TBB enabled devices, allowing the user to re-use the same code across a large range of available multi-core CPU and accelerators. The framework design is focused on performance and precision.</p>
<p>The core algorithms follow as close as possible the implementations widely used in frameworks like ROOT and libraries like GSL.</p>
<h2>Main features </h2>
<p>Currently Hydra supports:</p>
<ul>
<li>Generation of phase-space Monte Carlo samples with any number of particles in the final states. Sequential decays, calculation of integrals of models over the corresponding phase-space and production of weighted and unweighted samples, which can be flat or distributed following a model provided by the user. <br />
* Sampling of multidimensional pdfs.</li>
<li>Multidimensional maximum likelihood fits using binned and unbinned data sets.</li>
<li>Multi-layered simultaneous fit of different models, over different datasets, deploying different parallelization strategies for each model.</li>
<li>Calculation of S-Plots, a popular technique for statistical unfolding of populations contributing to a sample. <br />
* Evaluation of multidimensional functions over heterogeneous data sets.</li>
<li>Numerical integration of multidimensional functions using self-adaptive Monte Carlo and quadrature methods.</li>
<li>Multidimensional sparse and dense histogramming of large samples.</li>
<li>Object-based interface to FFTW and CuFFT for performing Fast Fourier Transform in CPU and GPU.</li>
<li>FFT based one-dimensional convolution for arbitrary signal and kernel shapes.</li>
<li>Booststrap and real cubic spline for datasets on CPU and GPU.</li>
<li>Sobol low discrepance sequences up to 3667 dimensions.</li>
</ul>
<p>Hydra also provides a bunch of custom types, optimized containers and a number of algorithms and constructs to maximize performance, avoiding unnecessary usage of memory and without losing the flexibility and portability to compile and run the same code across different platforms and deployment scenarios.</p>
<p>For example, just changing .cu to .cpp in any source code written only using the Hydra and standard C++14 is enough to compile your application for OpenMP or TBB compatible devices using GCC or other compiler in a machine without a NVIDIA GPU installed.</p>
<p>In summary, by using Hydra the user can transparently implement and dispatch typical bottle-neck calculations to a suitable parallel device and get speed-up factors ranging from dozens to hundreds. <br />
</p>
<h2>Hydra and Thrust </h2>
<p>Hydra is implemented on top of the <a href="https://thrust.github.io/">Thrust library</a> and relies strongly on Thrust's containers, algorithms and backend management systems. The official version of Thrust supports tuples with maximum ten elements. In order to overcome this limitation, Hydra uses an <a href="https://github.com/andrewcorrigan/thrust-multi-permutation-iterator">unofficial version, forked from the original, by Andrew Currigan and collaborators</a>. This version implements variadic tuples and related classes, as well as provides some additional functionality, which are missing in the official Thrust. <br />
In order to keep Hydra uptodated with the latest bug-fixes and architetural improvements in Thrust, at each Hydra release, the official <a href="https://thrust.github.io/">Thrust library</a> is patched with the Currigan's variadic tuple implementation.</p>
<p>So, version of Thrust distributed with Hydra is maintained by <a href="https://github.com/MultithreadCorner">MultithreadCorner</a>. It is basically a fork of Currigan's repository, which was merged with the latest official release available in GitHub (Thrust 1.9.7).</p>
<p><em><b>Hydra does not depend or conflict with the official Thrust library distributed with the CUDA-SDK.</b></em></p>
<h2>Supported Parallel Backends </h2>
<p>Hydra uses the underlying Thrust's "backend systems" to control how the algorithms get mapped to and executed on the parallel processors and accelerators available to a given application. When necessary, the backends can be specified using the symbols <a class="el" href="namespacehydra_1_1device.html#a643f8c450c0d3d1e4fa3a45a7e6afe1d">hydra::device::sys_t</a>, <a class="el" href="namespacehydra_1_1host.html#a5e8b9d47f3f6699e2a9971dc9d95c0ab">hydra::host::sys_t</a>, <a class="el" href="namespacehydra_1_1omp.html#aaa396579a80e70accce2a84d87d677d0">hydra::omp::sys_t</a>, <a class="el" href="namespacehydra_1_1tbb.html#a89a9daf9cc709b969e11e8953a6c1c71">hydra::tbb::sys_t</a>, <a class="el" href="namespacehydra_1_1cuda.html#a05c7818f1ebb50d17aff5dc1f7e0c2ab">hydra::cuda::sys_t</a>, <a class="el" href="namespacehydra_1_1cpp.html#aa3a520d499179c56519aa9d2538354d7">hydra::cpp::sys_t</a>. The backends <a class="el" href="namespacehydra_1_1device.html#a643f8c450c0d3d1e4fa3a45a7e6afe1d">hydra::device::sys_t</a> and <a class="el" href="namespacehydra_1_1host.html#a5e8b9d47f3f6699e2a9971dc9d95c0ab">hydra::host::sys_t</a> are selected in compile time using the macros <code>HYDRA_HOST_SYSTEM</code> and <code>HYDRA_DEVICE_SYSTEM</code>. The following possibilities are available:</p>
<ul>
<li>host: CPP, OMP, TBB</li>
<li>device: CPP, OMP, TBB, CUDA</li>
</ul>
<p>For example, this will compile <code>my_program.cu</code> using OpenMP as host backend and CUDA as device backend using the NVidia's compiler <code>nvcc</code>:</p>
<div class="fragment"><div class="line">nvcc  -I/path/to/Hydra -Xcompiler -fopenmp -DHYDRA_HOST_SYSTEM=OMP -DHYDRA_DEVICE_SYSTEM=CUDA  my_program.cu ...</div></div><!-- fragment --><p> The available "host" and "device" backends can be freely combined. Two important features related to Hydra's design and the backend configuration:</p>
<ul>
<li>If CUDA backend is not used, <a href="https://developer.nvidia.com/cuda-toolkit">NVCC and the CUDA runtime</a> are not necessary. The programs can be compiled with GCC, Clang or other host compiler compatible with C++14 support directly.</li>
<li>Programs written using only Hydra, Thrust, STL and standard c++ constructs, it means programs without any raw CUDA code or calls to the CUDA runtime API, can be compiled with NVCC, to run on CUDA backends, or a suitable host compiler to run on OpenMP , TBB and CPP backends. <b>Just change the source file extension from .cu to .cpp, or something else the host compiler understands.</b> <br />
</li>
</ul>
<h2>The Latest Version </h2>
<p>The latest release can be downloaded <a href="https://github.com/MultithreadCorner/Hydra/releases/latest">here</a>.</p>
<h2>Documentation </h2>
<h3>Reference manual</h3>
<p>The complete and updated <a href="http://www.doxygen.org/">Doxygen</a> source code documentation in HTML format is available at the <a href="https://multithreadcorner.github.io/Hydra/index.html">Reference documentation</a> web-page. It is also possible to browse the documentation by class, file or name using the links:</p>
<p>1.<a href="http://multithreadcorner.github.io/Hydra/classes.html">classes</a></p>
<p>2.<a href="http://multithreadcorner.github.io/Hydra/files.html">files</a></p>
<p>3.<a href="http://multithreadcorner.github.io/Hydra/namespacemembers.html">names</a></p>
<h3>User's guide</h3>
<p>The Hydra User's Guide is available in the following formats:</p>
<ul>
<li><a href="https://hydra-documentation.readthedocs.io/en/latest/">HTML</a></li>
<li><a href="https://readthedocs.org/projects/hydra-documentation/downloads/pdf/latest/">PDF</a></li>
<li><a href="https://readthedocs.org/projects/hydra-documentation/downloads/epub/latest/">EPUB</a></li>
</ul>
<h2>Installation and requirements </h2>
<p>Hydra is a header only library, so no build process is necessary to install it. Just place the <code>hydra</code> folder and its contents where your system can find it. The framework runs on Linux systems and requires at least a host compiler supporting C++14. To use NVidia's GPUs, CUDA 9.2 or higher is required. <br />
A suite of examples demonstrating the basic features of the framework is included in the <code>examples</code> folder. All the examples are organized in .inl files, which implements the <code><a class="el" href="async__mc_8inl.html#a1c03069360f1f90a556eb537e0ff8a72">main()</a></code> function. These files are included by .cpp and .cu files, which are compiled according with the availability of backends. TBB and CUDA backends requires the installation of the corresponding libraries and runtimes. These code samples uses, but does not requires <a href="https://root.cern.ch/">ROOT</a> for graphics, and <a href="http://tclap.sourceforge.net/">TCLAP</a> library for process command line arguments. Some functionality in Hydra requires Eigen, GSL, CuFFT and FFTW.</p>
<h2>Examples </h2>
<p>The examples are built using <a href="https://cmake.org/">CMAKE</a> with the following instructions:</p>
<ol type="1">
<li>clone the git repository: <code>git clone <a href="https://github.com/MultithreadCorner/Hydra.git">https://github.com/MultithreadCorner/Hydra.git</a></code></li>
<li>go to the Hydra repository: <code>cd Hydra</code> <br />
3. create a build directory: <code>mkdir build</code></li>
<li>go to build directory: <code>cd build</code></li>
<li><code>cmake ..</code></li>
<li><code>make</code></li>
</ol>
<p>The compiled examples will be placed in the build/examples folder. The sub-directories are named according to the functionalities they illustrate.</p>
<p>The examples are listed below:</p>
<ol type="1">
<li><b>async</b> : async_mc</li>
<li><b>fit</b> : basic_fit, multidimensional_fit, extended_logLL_fit, fractional_logLL_fit, phsp_unweighting_functor_and_fit, splot</li>
<li><b>histograming</b> : dense_histogram, sparse_histogram</li>
<li><b>misc</b> : multiarray_container, multivector_container, variant_types</li>
<li><b>numerical_integration</b> : adaptive_gauss_kronrod, gauss_kronrod, plain_mc, vegas</li>
<li><b>phase_space</b> : phsp_averaging_functor, phsp_evaluating_functor, phsp_reweighting, phsp_basic, phsp_unweighting, phsp_chain, phsp_unweighting_functor</li>
<li><b>phys</b> : breit_wigner_plus_chebychev, breit_wigner_plus_polynomial, crystal_ball_plus_exponential, dalitz_plot, double_gaussian_plus_exponential, gaussian_plus_argus, ipatia_plus_argus, particle_mass, pseudo_experiment</li>
<li><b>random</b> : basic_distributions, sample_distribution</li>
<li><b>root_macros</b> : macros to run examples in ROOT</li>
</ol>
<p>Each compiled example executable will have an postfix (ex.:_cpp, _cuda, _omp, _tbb) to indicate the deployed device backend. <br />
All examples use CPP as host backend.</p>
<h2>Recent publications and presentations at conferences and workshops </h2>
<ol type="1">
<li><a href="https://inspirehep.net/record/1636201/files/arXiv:1711.05683.pdf">A. A. Alves Junior, <em>Hydra: a C++11 framework for data analysis in massively parallel platforms</em>, Proceedings of the 18th International Workshop on Advanced Computing and Analysis Techniques in Physics Research, 21-25 August 2017 Seattle,USA</a>,</li>
<li><a href="https://indico.cern.ch/event/567550/contributions/2638690/">A. A. Alves Junior, <em>Hydra: Accelerating Data Analysis in Massively Parallel Platforms</em> - ACAT 2017, University of Washington, 21-25 August 2017, Seattle</a></li>
<li><a href="http://on-demand.gputechconf.com/gtc/2017/presentation/S7340-antonio-augusto-alves-hydra-a-framework-for-data-analysis-in-massively-parallel-platforms.pdf">A. A. Alves Junior, <em>Hydra: A Framework for Data Analysis in Massively Parallel Platforms</em> - NVIDIA’s GPU Technology Conference, May 8-11, 2017 - Silicon Valley, USA</a></li>
<li><a href="https://indico.cern.ch/event/613842/">A. A. Alves Junior, <em>Hydra</em> - HSF-HEP analysis ecosystem workshop, 22-24 May 2017 Amsterdam, Netherlands</a></li>
<li><a href="http://www.roma1.infn.it/conference/GPU2016/pdf/talks/AlvesJr.pdf">A. A. Alves Junior, <em>MCBooster and Hydra: two libraries for high performance computing and data analysis in massively parallel platforms</em> -Perspectives of GPU computing in Science September 2016, Rome, Italy</a></li>
</ol>
<h2>How to cite Hydra </h2>
<p>[1]Alves Junior, A.A. - MultithreadCorner/Hydra, (2018). doi:10.5281/zenodo.1206261</p>
<p>bibtex: </p><div class="fragment"><div class="line">@misc{hydra,</div><div class="line"></div><div class="line">  author       = {Alves Junior, A A},</div><div class="line">  title        = {MultithreadCorner/Hydra},</div><div class="line">  month        = March,</div><div class="line">  year         = 2018,</div><div class="line">  doi          = {10.5281/zenodo.1206261},</div><div class="line">  url          = {https://doi.org/10.5281/zenodo.1206261}</div><div class="line">}</div></div><!-- fragment --><h2>Licensing </h2>
<p>Hydra is released under the <a href="http://www.gnu.org/licenses/gpl-3.0.en.html">GNU General Public License version 3</a>. Please see the file called <a href="https://github.com/MultithreadCorner/Hydra/blob/master/COPYING">COPYING</a>.</p>
<h2>Contact the developers </h2>
<p>Here’s what you should do if you need help or would like to contribute:</p>
<ol type="1">
<li>If you need help or would like to ask a general question, subscribe and use <a href="https://groups.google.com/forum/#!forum/hydra-library-users">https://groups.google.com/forum/#!forum/hydra-library-users</a>.</li>
<li>If you found a bug, use GitHub issues.</li>
<li>If you have an idea, suggestion or whatever, use GitHub issues.</li>
<li>If you want to contribute, submit a pull request <a href="https://github.com/MultithreadCorner/Hydra">https://github.com/MultithreadCorner/Hydra</a>.</li>
</ol>
<h2>Author </h2>
<p>Hydra was created and is maintained by <a href="https://github.com/AAAlvesJr">Antonio Augusto Alves Jr</a>.</p>
<h2>Acknowledgement </h2>
<p>Initial Hydra's development was supported by the <a href="http://nsf.gov/index.jsp">National Science Foundation</a> under the grant number <a href="http://nsf.gov/awardsearch/showAward?AWD_ID=1414736">PHY-1414736</a>. Any opinions, findings, and conclusions or recommendations expressed in this material are those of the developers and do not necessarily reflect the views of the National Science Foundation. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Dec 3 2023 21:29:48 for Hydra by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
